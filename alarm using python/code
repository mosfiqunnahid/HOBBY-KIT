import pyttsx3
import speech_recognition as sr
import datetime

engine = pyttsx3.init('sapi5')



voices = engine.getProperty('voices')
engine.setProperty('voice', voices[0].id)


def talk(audio) -> object:
    print('jesssi::   ' + audio)
    engine.say(audio)
    engine.runAndWait()


def GivenCommand():
    k = sr.Recognizer()
    with sr.Microphone() as source:
        print("Listening...")
        k.pause_threshold = 1
        audio = k.listen(source, phrase_time_limit=5)
    try:
        Input = k.recognize_google(audio, language='en-in')
        print('srikar:: ' + Input + '\n')

    except sr.UnknownValueError:

        Input = GivenCommand()

    return Input


Input = GivenCommand()
Input = Input.lower()
if __name__ == '__main__':

    if 'set reminder' in Input or 'make a reminder ' in Input or 'reminder' in Input:

        talk('what do you want to remember ')
        remember = GivenCommand()
        talk('ok,')
        try:
            talk('at what houe you want to set remainder')
            hour = int(GivenCommand())
            talk('ok, at what minute you want to set ')
            minuit = int(GivenCommand())
            talk('am or pm ')
            ampm = GivenCommand()
            talk('i am glade to remaind you srikar ')
            try:
                if ampm == 'pm':
                    hour = hour + 12
                while 1 == 1:
                    if (hour == datetime.datetime.now().hour and minuit == datetime.datetime.now().minute):
                        talk('you said to remember me that::' + remember)

            except:
                talk('')
        except:
            talk('so')

